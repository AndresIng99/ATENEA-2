(()=>{"use strict";!function(e){class t{constructor(){this.bindEvents()}bindEvents(){const t=document.querySelectorAll(".wpdm-social-share-button[data-channel]");t.length>0&&t.forEach((e=>{e.addEventListener("click",this.triggerShare.bind(this))})),e(document).on("click","._wpdm-social-share-modal-close, ._wpdm-social-share-modal-overlay",(function(t){t.preventDefault(),e("._wpdm-social-share-modal").fadeOut(100),e("._wpdm-social-share-modal-overlay").fadeOut(100)}))}triggerShare(e){const t=e.target.closest(".wpdm-social-share-button"),i=t.dataset.channel,o=wpdm_social_share.permalink||window.location.href;new class{windowHeight="400";windowWidth="600";title=wpdm_social_share.title;description=wpdm_social_share.description;constructor(e,t,i){this.channel=e,this.permalink=t,this.button=i}async counter(){const e=wpdm_social_share.ajax_url+"?action=wpdm_social_share_counter";var t={channel:this.channel,url:this.permalink,post_id:wpdm_social_share.post_id||0,nonce:wpdm_social_share.nonce||0,user_id:wpdm_social_share.user_id||0,user_agent:navigator.userAgent||""};const i=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),o=await i.json();if(console.log(o),t=o.data||{},o.success){this.saveToLocalStorage();const e=o.data.shares,i=this.button.closest("._social-share-container"),s=i.querySelectorAll("[data-channel]");s.length>0&&s.forEach((t=>{const i=t.getAttribute("data-channel"),o=e.find((e=>e.channel===i));if(o){const e=t.querySelector("._channel-count span");e&&(e.innerText=o.total||0)}}));const n=i.querySelector("._total-share-count");n&&(n.querySelector("span:first-child").innerText=t.total||0)}}saveToLocalStorage(){const e={url:this.permalink,channel:this.channel};let t=localStorage.getItem("wpdm_social_share_shares");if(t)try{t=JSON.parse(t)}catch(e){t=[]}else t=[];t.push(e),localStorage.setItem("wpdm_social_share_shares",JSON.stringify(t))}share(){if("function"!=typeof this["before_"+this.channel]||this["before_"+this.channel]()){if(!["copy","more"].includes(this.channel))try{const e=wpdm_social_share.options.maximum_click_count||0;if(0===e||""==e)this.counter();else{let t=localStorage.getItem("wpdm_social_share_shares");if(t)try{t=JSON.parse(t)}catch(e){t=[]}else t=[];t.filter((e=>e.url===this.permalink&&e.channel===this.channel)).length<e&&this.counter()}}catch(e){console.log(e)}"copy"===this.channel&&this.counter(),"function"==typeof this[this.channel]&&this[this.channel](),"function"==typeof this["after_"+this.channel]&&this["after_"+this.channel]()}}more(){jQuery("._wpdm-social-share-modal").fadeIn(150),jQuery("._wpdm-social-share-modal-overlay").fadeIn(100)}copy(){const e=document.createElement("textarea");e.value=this.permalink,document.body.appendChild(e),e.select(),document.execCommand("copy"),e.remove()}after_copy(){if(this.button.querySelector("span._channel-name")){const e=this.button.querySelector("._channel-tooltip")||document.createElement("span");e.classList.add("_channel-tooltip"),e.classList.add("wp-dark-mode-ignore"),e.classList.add("not-slanted"),e.innerText=wpdm_social_share.labels.copied||"Copied",e.style.display="none",this.button.appendChild(e),jQuery(e).fadeIn(120),setTimeout((()=>{jQuery(e).fadeOut(120)}),2e3)}}facebook(){window.open("https://www.facebook.com/sharer/sharer.php?u="+encodeURI(this.permalink),"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height="+this.windowHeight+",width="+this.windowWidth)}twitter(){window.open("https://twitter.com/share?url="+encodeURI(this.permalink)+"&text="+encodeURI(this.title),"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height="+this.windowHeight+",width="+this.windowWidth)}linkedin(){window.open("https://www.linkedin.com/shareArticle?mini=true&url="+encodeURI(this.permalink)+"&title="+encodeURI(this.title),"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height="+this.windowHeight+",width="+this.windowWidth)}google(){window.open("https://plus.google.com/share?url="+encodeURI(this.permalink),"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height="+this.windowHeight+",width="+this.windowWidth)}pinterest(){window.open("https://pinterest.com/pin/create/button/?url="+encodeURI(this.permalink)+"&media="+encodeURI(wpdm_social_share.image)+"&description="+encodeURI(this.title),"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height="+this.windowHeight+",width="+this.windowWidth)}tumblr(){window.open("https://www.tumblr.com/share/link?url="+encodeURI(this.permalink)+"&name="+encodeURI(wpdm_social_share.title)+"&description="+encodeURI(wpdm_social_share.description),"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height="+this.windowHeight+",width="+this.windowWidth)}reddit(){window.open("https://reddit.com/submit?url="+encodeURI(this.permalink)+"&title="+encodeURI(wpdm_social_share.title),"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height="+this.windowHeight+",width="+this.windowWidth)}stumbleupon(){window.open("https://www.stumbleupon.com/submit?url="+encodeURI(this.permalink)+"&title="+encodeURI(wpdm_social_share.title),"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height="+this.windowHeight+",width="+this.windowWidth)}delicious(){window.open("https://delicious.com/save?url="+encodeURI(this.permalink)+"&title="+encodeURI(wpdm_social_share.title),"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height="+this.windowHeight+",width="+this.windowWidth)}evernote(){window.open("https://www.evernote.com/clip.action?url="+encodeURI(this.permalink)+"&title="+encodeURI(wpdm_social_share.title),"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height="+this.windowHeight+",width="+this.windowWidth)}wordpress(){window.open("https://wordpress.com/press-this.php?u="+encodeURI(this.permalink)+"&t="+encodeURI(wpdm_social_share.title)+"&s="+encodeURI(wpdm_social_share.description),"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height="+this.windowHeight+",width="+this.windowWidth)}pocket(){window.open("https://getpocket.com/save?url="+encodeURI(this.permalink)+"&title="+encodeURI(wpdm_social_share.title),"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height="+this.windowHeight+",width="+this.windowWidth)}email(){window.open("mailto:?subject="+encodeURI(wpdm_social_share.title)+"&body="+encodeURI(this.permalink),"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height="+this.windowHeight+",width="+this.windowWidth)}print(){window.print()}whatsapp(){window.open("https://api.whatsapp.com/send?text="+encodeURI(wpdm_social_share.title)+" "+encodeURI(this.permalink),"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height="+this.windowHeight+",width="+this.windowWidth)}sms(){window.open("sms:?body="+encodeURI(wpdm_social_share.title)+" "+encodeURI(this.permalink),"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height="+this.windowHeight+",width="+this.windowWidth)}messenger(){window.open("https://www.facebook.com/dialog/send?app_id=6292016320814619&link="+encodeURI(this.permalink)+"&redirect_uri="+encodeURI(this.permalink),"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height="+this.windowHeight+",width="+this.windowWidth)}telegram(){window.open("https://telegram.me/share/url?url="+encodeURI(this.permalink)+"&text="+encodeURI(wpdm_social_share.title),"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height="+this.windowHeight+",width="+this.windowWidth)}}(i,o,t).share()}}document.addEventListener("DOMContentLoaded",(function(){new t}))}(jQuery)})();